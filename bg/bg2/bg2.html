<!DOCTYPE html>
<html>
<head>
    <script>document.addEventListener('contextmenu', (e) => e.preventDefault());</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АРТЕРРИИ</title>
    <script>
// Блокировка копирования, вырезания и контекстного меню
document.addEventListener('copy', (e) => e.preventDefault());
document.addEventListener('cut', (e) => e.preventDefault());
document.addEventListener('contextmenu', (e) => e.preventDefault());

// Блокировка выделения (кроме интерактивных элементов)
document.addEventListener('selectstart', (e) => {
    const target = e.target;
    if (
        !target.isContentEditable && 
        target.tagName !== 'INPUT' && 
        target.tagName !== 'TEXTAREA' && 
        !target.classList.contains('allow-selection')
    ) {
        e.preventDefault();
    }
});

// Блокировка drag & drop (кроме интерактивных элементов)
document.addEventListener('dragstart', (e) => {
    const target = e.target;
    if (
        target.tagName !== 'INPUT' && 
        target.tagName !== 'TEXTAREA'
    ) {
        e.preventDefault();
    }
});

// CSS-защита от выделения (с исключением для полей ввода)
const antiSelectionStyle = document.createElement('style');
antiSelectionStyle.textContent = `
    *:not(input):not(textarea):not([contenteditable="true"]):not(.allow-selection) {
        user-select: none !important;
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;
    }
`;
document.head.appendChild(antiSelectionStyle);
</script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap');
        body {
            background-color: transparent;
            color: #ff0;
            font-family: 'Fira Code', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 85vh;
            margin: 0;
            line-height: 1.6;
            text-shadow: 0 0 10px rgba(255, 255, 0, 0.8);
            overflow: hidden;
            transition: opacity 1.5s ease;
        }
        .container {
            width: 100%;
            max-width: 700px;
            padding: 0px;
            position: relative;
        }
        .typing {
            border-right: 0px solid #ff0;
            animation: blink 1s step-end infinite;
        }
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: #ff0 }
        }
        .input-line {
            display: flex;
            align-items: center;
            margin-top: 30px;
        }
        .prompt {
            color: #fff;
            margin-right: 10px;
        }
        .input-container {
            position: relative;
            flex-grow: 1;
        }
        .input-field {
            background: none;
            border: none;
            color: #fff;
            font-family: 'Fira Code', monospace;
            padding: 5px 0;
            width: 100%;
            outline: none;
            caret-color: #fff;
        }
        .underline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: #fff;
        }
        .error-message {
            color: #fff !important;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8) !important;
        }
        .fade-out {
            opacity: 0;
        }
        #content-container {
            display: none;
            width: 100%;
        }
        #terminal-output div {
            margin-bottom: 15px;
        }
        /* Стили для модального окна правил */
        .modal-overlay {
            position: fixed;
            top: 40px;
            left: 20px;
            right: 20px;
            bottom: 290px;
            background: transparent;
            display: flex;
            z-index: 1000;
        }
        .modal-content {
            background: black;
            color: white;
            padding: 30px;
            max-width: 1000vw;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 5px;
            font-family: 'Fira Code', monospace;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        .modal-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .modal-section {
            margin-bottom: 15px;
        }
        .modal-checkbox {
            margin-top: 20px;
            display: flex;
            align-items: center;
        }
        .modal-checkbox input {
            margin-right: 10px;
        }
        .modal-button {
            background: #0000FF;
            color: white;
            border: 1px;
            padding: 10px 20px;
            margin-top: 20px;
            cursor: pointer;
            font-family: 'Fira Code', monospace;
        }
        .modal-button:disabled {
            background: black;
            cursor: not-allowed;
        }
        /* Стили для анимации логотипа */
        #logo-animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
        }
        #logo-canvas {
            width: 300px;
            height: 300px;
        }
        #logo-timer {
            position: absolute;
            bottom: 50px;
            color: white;
            font-size: 1.5em;
            font-family: 'Fira Code', monospace;
            text-align: center;
            width: 100%;
        }
    </style>
</head>
<body>    
    <div class="container">
        <div id="terminal-output"></div>
        
        <div class="input-line" style="display:none;">
            <span class="prompt">>_</span>
            <div class="input-container">
                <input type="text" id="command-input" class="input-field" autocomplete="off" placeholder="Нажмите сюда, чтобы ввести название коллекции...">
                <div class="underline"></div>
            </div>
        </div>
        
        <div id="content-container"></div>
    </div>

    <!-- Контейнер для анимации логотипа -->
    <div id="logo-animation-container">
        <canvas id="logo-canvas"></canvas>
        <div id="logo-timer"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script>
        // Генерация 7-значного счетчика посещений (количество открытий сайта за все время его существования вне зависимости от устройств и браузеров)
        function getVisitId() {
            let visitId = sessionStorage.getItem('arterii_visit_id');
            if (!visitId) {
                // Получаем текущий счетчик из localStorage или начинаем с 1
                let counter = localStorage.getItem('arterii_visit_counter');
                if (!counter) {
                    counter = 1;
                } else {
                    counter = parseInt(counter) + 1;
                }
                visitId = String(counter).padStart(7, '0');
                // Сохраняем обновленный счетчик
                localStorage.setItem('arterii_visit_counter', counter);
                // Сохраняем ID для текущей сессии
                sessionStorage.setItem('arterii_visit_id', visitId);
            }
            return visitId;
        }

        const CONFIG = {
            welcomeMessages: [
                "[www.arterrii.ru] #Добро пожаловать...",
                "Загрузка арт-пространства v1.9.5.25...",
                "> Привет, гость " + getVisitId() + "! Это Соль, AI-гид этого арт-музея.", 
                "> Куда полетим сейчас?",
            ],
            accessCodes: {
                "arterii2024": "gallery.html",
                "salt": "salt-project.html"
            },
            defaultResponse: "> Ошибка: такой коллекции нет"
        };

        class LogoAnimation {
            constructor() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                this.renderer = null;
                this.colors = ['#7F00FF', '#0000FF', '#00BFFF', '#00FF80', '#FFFF00', '#FF6000', '#FF0000'];
                this.centerBall = null;
                this.logoGroup = null;
                this.smallBalls = [];
                this.textMaterial = null;
                this.animationId = null;
                
                this.init();
            }

            init() {
                this.renderer = new THREE.WebGLRenderer({ 
                    antialias: true,
                    canvas: document.getElementById('logo-canvas'),
                    alpha: true,
                    powerPreference: "high-performance"
                });
                
                this.renderer.setSize(300, 300);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                this.camera.position.z = 8;

                const fontLoader = new THREE.FontLoader();
                fontLoader.load('https://cdn.jsdelivr.net/npm/three@0.132.2/examples/fonts/helvetiker_regular.typeface.json', 
                    (font) => this.createLogo(font),
                    (xhr) => console.log((xhr.loaded / xhr.total * 100) + '% loaded'),
                    (err) => console.error('Error loading font:', err)
                );
            }

            createLogo(font) {
                // Создание 3D-текста
                this.textMaterial = new THREE.MeshPhongMaterial({
                    color: 0xffffff,
                    emissive: 0xffffff,
                    emissiveIntensity: 1,
                    shininess: 100,
                    transparent: true,
                    opacity: 0.9
                });

                this.logoGroup = new THREE.Group();
                ['A', 'T', 'A', 'T'].forEach((char, i) => {
                    const textGeo = new THREE.TextGeometry(char, {
                        font: font,
                        size: 0.2,
                        height: 0.5,
                        curveSegments: 12,
                        bevelEnabled: false
                    });
                    const textMesh = new THREE.Mesh(textGeo, this.textMaterial);
                    const angle = (i / 4) * Math.PI * 2;
                    textMesh.position.set(Math.cos(angle) * 2, Math.sin(angle) * 2, 0);
                    textMesh.rotation.z = angle + Math.PI / 2;
                    if (i >= 2) textMesh.rotation.z += Math.PI;
                    this.logoGroup.add(textMesh);
                });
                this.scene.add(this.logoGroup);

                // Центральный шар
                this.centerBall = new THREE.Mesh(
                    new THREE.SphereGeometry(0.7, 32, 32),
                    new THREE.MeshPhongMaterial({
                        color: 0xffffff,
                        emissive: 0xffffff,
                        emissiveIntensity: 2,
                        shininess: 100,
                        transparent: true,
                        opacity: 0.95
                    })
                );
                this.scene.add(this.centerBall);

                // Маленькие шары
                this.colors.forEach((color, i) => {
                    const ball = new THREE.Mesh(
                        new THREE.SphereGeometry(0.15, 16, 16),
                        new THREE.MeshPhongMaterial({
                            color: new THREE.Color(color),
                            emissive: new THREE.Color(color),
                            emissiveIntensity: 1.5,
                            shininess: 50,
                            transparent: true,
                            opacity: 0.9
                        })
                    );
                    const angle = (i / this.colors.length) * Math.PI * 2;
                    ball.position.set(Math.cos(angle) * 4.5, Math.sin(angle) * 4.5, 0);
                    this.smallBalls.push(ball);
                    this.scene.add(ball);
                });

                // Освещение
                this.scene.add(new THREE.AmbientLight(0x404040));
                const pointLight = new THREE.PointLight(0xffffff, 2, 10);
                pointLight.position.set(0, 0, 2);
                this.scene.add(pointLight);

                this.animate();
            }

            animate() {
                if (document.hidden) return;
                
                this.animationId = requestAnimationFrame(() => this.animate());
                this.logoGroup.rotation.z += 0.005;
                
                const time = Date.now() * 0.001;
                const pulse = 1 + Math.sin(time) * 0.15;
                this.centerBall.scale.setScalar(pulse);
                this.centerBall.material.emissiveIntensity = 1 + Math.sin(time) * 1;
                this.textMaterial.emissiveIntensity = 0.8 + Math.sin(time * 1.5) * 0.5;
                
                this.smallBalls.forEach((ball, i) => {
                    const ballPulse = 0.8 + Math.sin(time + i) * 0.3;
                    ball.scale.setScalar(ballPulse);
                    ball.material.emissiveIntensity = 1 + Math.sin(time + i * 2) * 0.8;
                    const angle = (i / this.colors.length) * Math.PI * 2 + time * 0.7;
                    ball.position.set(
                        Math.cos(angle) * (4.5 + Math.sin(time + i) * 0.4),
                        Math.sin(angle) * (4.5 + Math.sin(time + i) * 0.4),
                        0
                    );
                });
                
                this.renderer.render(this.scene, this.camera);
            }

            stop() {
                cancelAnimationFrame(this.animationId);
            }
        }

        let logoAnimation = null;

        async function typeText(element, text, isError = false) {
            element.innerHTML = '';
            element.classList.add('typing');
            if(isError) element.classList.add('error-message');
            
            for (let i = 0; i < text.length; i++) {
                element.innerHTML = text.substring(0, i+1);
                await new Promise(r => setTimeout(r, 20 + Math.random() * 50));
            }
            
            element.classList.remove('typing');
            return new Promise(r => setTimeout(r, 300));
        }

        function showRulesModal(targetPage) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-title">артеррии/</div>
                    <div class="modal-section">
                        <span style="color: #00BFFF;">Цифровой арт-музей для всех форм творчества.</span><br>
                        В наших фондах — текст, звук, графика, анимация, 3D, цифровые технологии и всё, что рождается на стыке кода и вдохновения.
                    </div>
                    
                    <div class="modal-section">
                        <strong>/о нас</strong><br>
                        <span style="color: #00BFFF;">Дан</span> / соавтор, главный разработчик, концепт-вокалист<br>
                        <span style="color: #00BFFF;">Ия</span> / соавтор, концепт-режиссёр, художник CG<br>
                        <span style="color: #00BFFF;">Оля</span> / куратор<br>
                        <a href="https://t.me/producer_arterrii_ru" target="_blank" style="color: #00BFFF; text-decoration: none;">Аня</a> / продюсер<br>
                        И другие. 
                    </div>
                    
                    <div class="modal-section">
                        Единственный адрес нашего проекта — arterrii.ru.<br>
                        Мы в соцсетях: <span style="color: red;">см. в футере сайта</span>.<br>
                        <span style="color: red;">Иные сайты / страницы с нами никак не связаны!</span>
                    </div>
                    
                    <div class="modal-section">
                    <strong>/важно</strong><br>
                        Мы создали арт-музей как безопасное пространство для искусства.<br>
                        <span style="color: red;">Любое копирование, использование и распространение без разрешения запрещено законом (ст. 1301 ГК РФ).</span>
                    </div>
                    
                    <div class="modal-section">
                        <strong>/сотрудничество</strong><br>
                        Если творите с душой — присоединяйтесь к нашим коллекциям.<br>
                        Только прямые производители / <span style="color: red;">посредникам - вход закрыт</span>.
                    </div>
                    
                    <div class="modal-section">
                        <span style="color: #00BFFF;">/условия сотрудничества:</span><br>
                        1. Тест-драйв - 2 недели. Бесплатно, без обязательств.<br>
                        2. Оплата. Помесячно (или за результат), предоплатой. Оплата только после договоренности с продюсером => <a href="https://t.me/producer_arterrii_ru" target="_blank" style="color: white; text-decoration: none;">
  <img src="https://telegram.org/img/t_logo.png" alt="Telegram" style="width: 16px; height: 16px; vertical-align: middle;">
</a>. <br>
                        • Платежи за текущий месяц не возвращаются (даже при досрочном уходе)!<br>
                        • Нейросети и доступ к новым функциям сайта — это наши подарки, а не обязанности.
                    </div>

                        <div class="modal-section">
                        <span style="color: #00BFFF;">/прекращение сотрудничества:</span><br>
                        • После окончания оплаченного месяца мы можем не продлевать сотрудничество без объяснения причин.<br>
                        • Вы тоже вправе уйти в любой момент — просто не продлевайте аренду. Все ваши экспонаты будут полностью удалены с нашего сайта. Если чувствуем, что нам не по пути — расстаёмся корректно.
                    </div>

                    <div class="modal-section">
                        • Мы не собираем персональные данные.
                    </div>
                    
                    <div class="modal-section">
                        <strong>/коллабы:</strong><br>
                        Сотрудничаем с теми, кому близок наш дух.<br>
                        Открыты к любым предложениям и идеям / <span style="color: #00BFFF;">пишите =></span> <a href="https://t.me/producer_arterrii_ru" target="_blank" style="color: white; text-decoration: none;">
  <img src="https://telegram.org/img/t_logo.png" alt="Telegram" style="width: 16px; height: 16px; vertical-align: middle;">
</a>
                    </div>
                    
                    <div class="modal-checkbox">
                        <input type="checkbox" id="agree-checkbox">
                        <label for="agree-checkbox">Я прочитал(а) и согласен(на) с правилами проекта.</label>
                    </div>
                    
                    <button class="modal-button" id="continue-button" disabled>Продолжить</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            const checkbox = modal.querySelector('#agree-checkbox');
            const continueButton = modal.querySelector('#continue-button');
            
            checkbox.addEventListener('change', function() {
                continueButton.disabled = !this.checked;
            });
            
            continueButton.addEventListener('click', function() {
                document.body.removeChild(modal);
                showLogoAnimation(targetPage);
            });
        }

        function showLogoAnimation(targetPage) {
            const container = document.getElementById('logo-animation-container');
            const timerElement = document.getElementById('logo-timer');
            
            // Показываем контейнер с анимацией
            container.style.display = 'flex';
            
            // Инициализируем анимацию логотипа
            logoAnimation = new LogoAnimation();
            
            // Запускаем таймер на 7 секунд
            let secondsLeft = 7;
            timerElement.textContent = secondsLeft;
            
            const timerInterval = setInterval(() => {
                secondsLeft--;
                timerElement.textContent = secondsLeft;
                
                if (secondsLeft <= 0) {
                    clearInterval(timerInterval);
                    container.style.display = 'none';
                    if (logoAnimation) {
                        logoAnimation.stop();
                        logoAnimation = null;
                    }
                    loadContent(targetPage);
                }
            }, 1000);
        }

        async function loadContent(pageUrl) {
            try {
                const response = await fetch(pageUrl);
                const content = await response.text();
                
                document.getElementById('terminal-output').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('content-container').innerHTML = content;
                    document.getElementById('content-container').style.display = 'block';
                    document.getElementById('terminal-output').style.display = 'none';
                }, 500);
            } catch (error) {
                const response = document.createElement('div');
                await typeText(response, "> Ошибка загрузки коллекции", true);
                document.getElementById('terminal-output').appendChild(response);
            }
        }

        async function initTerminal() {
            const output = document.getElementById('terminal-output');
            
            for (const msg of CONFIG.welcomeMessages) {
                const line = document.createElement('div');
                output.appendChild(line);
                await typeText(line, msg);
            }
            
            document.querySelector('.input-line').style.display = 'flex';
            document.getElementById('command-input').focus();
        }

        function setupInput() {
            const input = document.getElementById('command-input');
            
            input.addEventListener('keypress', async function(e) {
                if(e.key === 'Enter') {
                    const code = input.value.trim();
                    const response = document.createElement('div');
                    document.getElementById('terminal-output').appendChild(response);
                    
                    if(CONFIG.accessCodes[code]) {
                        await typeText(response, "> Ок. Ознакомьтесь сначала с правилами...");
                        input.value = '';
                        
                        // Показываем модальное окно с правилами сразу
                        setTimeout(() => {
                            showRulesModal(CONFIG.accessCodes[code]);
                        }, 500);
                    } else {
                        await typeText(response, CONFIG.defaultResponse, true);
                        input.value = '';
                    }
                }
            });
        }

        window.onload = function() {
            setTimeout(initTerminal, 500);
            setupInput();
            
            document.addEventListener('click', function(e) {
                if(e.target.id === 'back-button') {
                    document.getElementById('content-container').style.display = 'none';
                    document.getElementById('content-container').innerHTML = '';
                    document.getElementById('terminal-output').style.display = 'block';
                    document.getElementById('terminal-output').style.opacity = 1;
                    document.getElementById('command-input').focus();
                }
            });
        };
    </script>
</body>
</html>
