{
  "version": 2,
  "routes": [
    {
      "src": "/(.*)",
      "headers": {
        // 1. Запрет кеширования (важно для безопасности)
        "Cache-Control": "no-store, no-cache, must-revalidate, max-age=0",
        "Pragma": "no-cache",
        "Expires": "0",

        // 2. Защита от встраивания (clickjacking)
        "X-Frame-Options": "SAMEORIGIN",

        // 3. Политика безопасности контента (CSP) - разрешены оба домена
        "Content-Security-Policy": "default-src 'self' arterrii.ru arterrii.vercel.app; script-src 'self' arterrii.ru arterrii.vercel.app 'unsafe-eval' 'nonce-3a7f' https://cdn.jsdelivr.net; style-src 'self' arterrii.ru arterrii.vercel.app 'nonce-3a7f' https://fonts.googleapis.com; font-src 'self' arterrii.ru arterrii.vercel.app https://fonts.gstatic.com https://cdn.jsdelivr.net; img-src 'self' data: blob: arterrii.ru arterrii.vercel.app; connect-src 'self' arterrii.ru arterrii.vercel.app https://cdn.jsdelivr.net https://fonts.googleapis.com; frame-src 'self' https://t.me arterrii.ru arterrii.vercel.app; worker-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests; block-all-mixed-content;",

        // 4. Защита от MIME-спуфинга
        "X-Content-Type-Options": "nosniff",

        // 5. Контроль реферера (без утечки URL)
        "Referrer-Policy": "strict-origin-when-cross-origin",

        // 6. Запрет доступа к камере/микрофону
        "Permissions-Policy": "fullscreen=(self), geolocation=(), microphone=(), camera=(), display-capture=()",

        // 7. Защита от Spectre (изоляция окон)
        "Cross-Origin-Embedder-Policy": "require-corp",
        "Cross-Origin-Opener-Policy": "same-origin",
        "Cross-Origin-Resource-Policy": "same-origin",

        // 8. Обязательный HTTPS (HSTS)
        "Strict-Transport-Security": "max-age=63072000; includeSubDomains; preload",

        // 9. Динамический CORS (лучше проверять Origin на бэкенде)
        "Access-Control-Allow-Origin": "https://arterrii.vercel.app https://arterrii.ru",
        "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization",
        "Access-Control-Allow-Credentials": "true",  // Если нужны куки

        // 10. Доп. защита от XSS (устарел, но иногда полезен)
        "X-XSS-Protection": "1; mode=block",

        // 11. Отключение DNS prefetch (уменьшает утечки)
        "X-DNS-Prefetch-Control": "off",

        // 12. Запрет Flash/PDF-доступа
        "X-Permitted-Cross-Domain-Policies": "none"
      }
    }
  ]
}
